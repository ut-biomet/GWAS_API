{
  "servers": [
    {
      "url": ""
    }
  ],
  "openapi": "3.0.3",
  "info": {
    "title": "GWAS API",
    "description": "REST API for GWAS analysis",
    "contact": {
      "name": "Laboratory of Biometry and Bioinformatics, Hiroyoshi Iwata",
      "email": "iwata@ut-biomet.org"
    },
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    },
    "version": "0.0.1"
  },
  "paths": {
    "/echo": {
      "get": {
        "summary": "Echo back the input",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "default": {
            "description": "Default response.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "name": "msg",
            "description": "The message to echo",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": ""
            }
          }
        ],
        "tags": ["Utils"]
      }
    },
    "/version": {
      "get": {
        "summary": "Give information about current API version",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "default": {
            "description": "Default response.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        },
        "parameters": [],
        "tags": ["Utils"]
      }
    },
    "/gwas": {
      "post": {
        "summary": "Fit a GWAS model. This endpoint take Urls of geno and pheno data (and values of other GWAS parameters) and write an a json file to the give Url using a PUT request. It had been disign to work with amazon S3 services.",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "default": {
            "description": "Default response.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "name": "geno_url",
            "description": "url of the markers data file (.vcf.gz file)",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "pheno_url",
            "description": "url of the phenotypic data file (csv file)",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "upload_url",
            "description": "url of the PUT request for saving the model",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "trait",
            "description": "name of the trait to analyze. Must be a column name of the phenotypic file.",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "test",
            "description": "Which test to use. Either `\"score\"`, `\"wald\"` or `\"lrt\"`. For binary phenotypes, test = `\"score\"` is mandatory. For more information about this parameters see: https://www.rdocumentation.org/packages/gaston/versions/1.4.9/topics/association.test",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "fixed",
            "description": "Number of Principal Components to include in the model with fixed effect (for test = `\"wald\"` or `\"lrt\"`). Default value is 0. For more information about this parameters see: https://www.rdocumentation.org/packages/gaston/versions/1.4.9/topics/association.test",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int64",
              "default": 0
            }
          },
          {
            "name": "response",
            "description": "Either \"quantitative\" or \"binary\". Is the trait a quantitative or a binary phenotype? Default value is \"quantitative\".",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "quantitative"
            }
          },
          {
            "name": "thresh_maf",
            "description": "Threshold for filtering markers. Only markers with minor allele frequency > `thresh_maf` will be kept for the GWAS analysis. (default 0.05)",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "format": "double",
              "default": 0.05
            }
          },
          {
            "name": "thresh_callrate",
            "description": "Threshold for filtering markers. Only markers with a callrate > `thresh_callrate` will be kept.",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "format": "double",
              "default": 0.9
            }
          }
        ],
        "tags": ["GWAS"]
      }
    },
    "/adjustedResults": {
      "get": {
        "summary": "Adjusted results. This endpoint calculate the adjusted p-values of the gwas analysis and return all the results or only the significant adjusted p-value. The results are return in json format.",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "default": {
            "description": "Default response.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "name": "gwas_url",
            "description": "url of the result file saved by `/gwas` (json file)",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "adj_method",
            "description": "correction method: \"holm\", \"hochberg\", \"bonferroni\", \"BH\", \"BY\", \"fdr\", \"none\". Default: \"bonferroni\". (see https://www.rdocumentation.org/packages/stats/versions/3.6.2/topics/p.adjust for more details)",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "bonferroni"
            }
          },
          {
            "name": "thresh_p",
            "description": "threshold for filtering non-significative markers. If not specify return all the values",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "format": "double"
            }
          }
        ],
        "tags": ["GWAS"]
      }
    },
    "/manplot": {
      "get": {
        "summary": "DEPRECATED. Please use `/manplot.html` or `/manplot.png`. All request sent to this endpoint will be redirect to `/manplot.html` for backward compatibility.",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/html": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "default": {
            "description": "Default response.",
            "content": {
              "text/html": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "name": "gwas_url",
            "description": "url of the result file saved by `/gwas` (json file)",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "adj_method",
            "description": "p-value correction method: \"holm\", \"hochberg\", \"bonferroni\", \"BH\", \"BY\", \"fdr\", \"none\". Default: \"bonferroni\". (see https://www.rdocumentation.org/packages/stats/versions/3.6.2/topics/p.adjust for more details)",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "thresh_p",
            "description": "p value significant threshold (default 0.05)",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "format": "double"
            }
          },
          {
            "name": "chr",
            "description": "names of the chromosomes to show separated using comma. Show all chromosomes if nothing is specified.",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "filter_pAdj",
            "description": "threshold to remove points with pAdj > filter_pAdj from the plot (default no filtering)",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "format": "double"
            }
          },
          {
            "name": "filter_nPoints",
            "description": "threshold to keep only the filter_nPoints with the lowest p-values for the plot.",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "format": "double"
            }
          },
          {
            "name": "filter_quant",
            "description": "threshold to keep only the filter_quant*100 % of the points with the lowest p-values for the plot (default no filtering)",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "format": "double"
            }
          }
        ],
        "tags": ["Plots"],
        "deprecated": true
      }
    },
    "/manplot.html": {
      "get": {
        "summary": "Draw a Manhattan plot. This endpoint return the html code of a plotly interactive graph. By default only the 3000 points with the lowest p-values are display on the graph.",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/html": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "default": {
            "description": "Default response.",
            "content": {
              "text/html": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "name": "gwas_url",
            "description": "url of the result file saved by `/gwas` (json file)",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "adj_method",
            "description": "p-value correction method: \"holm\", \"hochberg\", \"bonferroni\", \"BH\", \"BY\", \"fdr\", \"none\". Default: \"bonferroni\". (see https://www.rdocumentation.org/packages/stats/versions/3.6.2/topics/p.adjust for more details)",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "bonferroni"
            }
          },
          {
            "name": "thresh_p",
            "description": "p value significant threshold (default 0.05)",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "format": "double",
              "default": 0.05
            }
          },
          {
            "name": "chr",
            "description": "names of the chromosomes to show separated using comma. Show all chromosomes if nothing is specified.",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "filter_pAdj",
            "description": "threshold to remove points with pAdj > filter_pAdj from the plot (default no filtering)",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "format": "double",
              "default": 1
            }
          },
          {
            "name": "filter_nPoints",
            "description": "threshold to keep only the filter_nPoints with the lowest p-values for the plot.",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "format": "double",
              "default": 3000
            }
          },
          {
            "name": "filter_quant",
            "description": "threshold to keep only the filter_quant*100 % of the points with the lowest p-values for the plot (default no filtering)",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "format": "double",
              "default": 1
            }
          }
        ],
        "tags": ["Plots"]
      }
    },
    "/manplot.png": {
      "get": {
        "summary": "Draw a Manhattan plot. This endpoint return png Image of the graph. By default all the points are display on the graph.",
        "responses": {
          "200": {
            "description": "OK"
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "default": {
            "description": "Default response."
          }
        },
        "parameters": [
          {
            "name": "gwas_url",
            "description": "url of the result file saved by `/gwas` (json file)",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "adj_method",
            "description": "p-value correction method: \"holm\", \"hochberg\", \"bonferroni\", \"BH\", \"BY\", \"fdr\", \"none\". Default: \"bonferroni\". (see https://www.rdocumentation.org/packages/stats/versions/3.6.2/topics/p.adjust for more details)",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "bonferroni"
            }
          },
          {
            "name": "thresh_p",
            "description": "p value significant threshold (default 0.05)",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "format": "double",
              "default": 0.05
            }
          },
          {
            "name": "chr",
            "description": "names of the chromosomes to show separated using comma. Show all chromosomes if nothing is specified.",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "filter_pAdj",
            "description": "threshold to remove points with pAdj > filter_pAdj from the plot (default no filtering)",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "format": "double",
              "default": 1
            }
          },
          {
            "name": "filter_nPoints",
            "description": "threshold to keep only the filter_nPoints with the lowest p-values for the plot.",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "format": "double",
              "default": 1e+100
            }
          },
          {
            "name": "filter_quant",
            "description": "threshold to keep only the filter_quant*100 % of the points with the lowest p-values for the plot (default no filtering)",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "format": "double",
              "default": 1
            }
          }
        ],
        "tags": ["Plots"]
      }
    },
    "/LDplot": {
      "get": {
        "summary": "Draw a LD plot. This endpoint return a png image.",
        "responses": {
          "200": {
            "description": "OK"
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "default": {
            "description": "Default response."
          }
        },
        "parameters": [
          {
            "name": "geno_url",
            "description": "url of the markers data file (.vcf.gz file)",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "from",
            "description": "lower bound of the range of SNPs for which the LD is computed (`from` must be lower than `to`)",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "to",
            "description": "upper bound of the range of SNPs for which the LD is computed (the total number of SNP should be lower than 50)",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "tags": ["Plots"]
      }
    }
  },
  "tags": [
    {
      "name": "Utils",
      "description": "Endpoints for checking the API"
    },
    {
      "name": "GWAS",
      "description": "Endpoints related to gwas analysis"
    },
    {
      "name": "Plots",
      "description": "Endpoints related to plots drawn from a GWAS model"
    }
  ]
}
